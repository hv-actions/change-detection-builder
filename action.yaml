name: "Gradle Build"
description: "Runs Gradle Build"

inputs:
  working-directory:
    description: "Working Directory"
    required: true
    default: "."

runs:
  using: "composite"
  steps:
  
    - name: Git configuration
      run: git config --global --add safe.directory '*'
      shell: bash  
      
    - name: Get changed files
      id: changes
      shell: bash
      run: |
        changes=$(git diff-tree --no-commit-id --name-only -r ${{ github.sha }} | xargs)
        echo "all=${changes}"
        echo "all=${changes}" >> $GITHUB_OUTPUT
    
    - name: Python command
      run: |
        echo "${{ steps.changes.outputs.all }}"
        python3 ${GITHUB_ACTION_PATH}/maven.py \
          "${{ steps.changes.outputs.all }}" 
      shell: bash   